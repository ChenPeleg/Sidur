# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Production on merge
on:
  push:
    branches: [ "production" ]

jobs:
  deploy_with_trigger:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        with:
          ref: production
      - name: list all files
        run: ls -al
      - name: Trigger the repository dispatch event
        run: |
          curl -X POST -H "Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}" https://api.github.com/repos/ChenPeleg/app-links-portal/dispatches

#        run: |
#          curl -XPOST -u "USERNAME:${{ secrets.GITHUB_TOKEN }}" \
#          -H "Accept: application/vnd.github.everest-preview+json" \
#          "https://api.github.com/repos/ChenPeleg/app-links-portal/dispatches" \
#          -d '{ "event_type": "trigger-action" }'

